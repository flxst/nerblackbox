
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../preparation/">
      
      
        <link rel="next" href="../training/">
      
      <link rel="icon" href="../images/package-16.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Data - nerblackbox</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="nerblackbox" class="md-header__button md-logo" aria-label="nerblackbox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m8.878.392 5.25 3.045c.54.314.872.89.872 1.514v6.098a1.75 1.75 0 0 1-.872 1.514l-5.25 3.045a1.75 1.75 0 0 1-1.756 0l-5.25-3.045A1.75 1.75 0 0 1 1 11.049V4.951c0-.624.332-1.201.872-1.514L7.122.392a1.75 1.75 0 0 1 1.756 0ZM7.875 1.69l-4.63 2.685L8 7.133l4.755-2.758-4.63-2.685a.248.248 0 0 0-.25 0ZM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432Zm6.25 8.271 4.625-2.683a.25.25 0 0 0 .125-.216V5.677L8.75 8.432Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            nerblackbox
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Start
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../preparation/" class="md-tabs__link">
      Preparation
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Data
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../training/" class="md-tabs__link">
      Training
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../evaluation/" class="md-tabs__link">
      Evaluation
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../inference/" class="md-tabs__link">
      Inference
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../advanced/compatibility_with_huggingface/" class="md-tabs__link">
        Advanced
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../python_api/overview/" class="md-tabs__link">
        Python API
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../cli/" class="md-tabs__link">
      CLI
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="nerblackbox" class="md-nav__button md-logo" aria-label="nerblackbox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m8.878.392 5.25 3.045c.54.314.872.89.872 1.514v6.098a1.75 1.75 0 0 1-.872 1.514l-5.25 3.045a1.75 1.75 0 0 1-1.756 0l-5.25-3.045A1.75 1.75 0 0 1 1 11.049V4.951c0-.624.332-1.201.872-1.514L7.122.392a1.75 1.75 0 0 1 1.756 0ZM7.875 1.69l-4.63 2.685L8 7.133l4.755-2.758-4.63-2.685a.248.248 0 0 0-.25 0ZM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432Zm6.25 8.271 4.625-2.683a.25.25 0 0 0 .125-.216V5.677L8.75 8.432Z"/></svg>

    </a>
    nerblackbox
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../preparation/" class="md-nav__link">
        Preparation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Data
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset-sources" class="md-nav__link">
    Dataset Sources
  </a>
  
    <nav class="md-nav" aria-label="Dataset Sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#huggingface-hf" class="md-nav__link">
    HuggingFace (HF)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-bi" class="md-nav__link">
    Built-in (BI)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-filesystem-lf" class="md-nav__link">
    Local Filesystem (LF)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotation-tool-at" class="md-nav__link">
    Annotation Tool (AT)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset-types" class="md-nav__link">
    Dataset Types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset-formats" class="md-nav__link">
    Dataset Formats
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset-splits" class="md-nav__link">
    Dataset Splits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annotation-schemes" class="md-nav__link">
    Annotation Schemes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset-analysis" class="md-nav__link">
    Dataset Analysis
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../training/" class="md-nav__link">
        Training
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        Evaluation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../inference/" class="md-nav__link">
        Inference
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/compatibility_with_huggingface/" class="md-nav__link">
        Compatibility with HuggingFace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/reproduction_of_results/" class="md-nav__link">
        Reproduction of Results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/text_encoding/" class="md-nav__link">
        Text Encoding
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Python API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Python API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_api/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_api/store/" class="md-nav__link">
        Store
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_api/dataset/" class="md-nav__link">
        Dataset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_api/training/" class="md-nav__link">
        Training
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_api/model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_api/annotation_tool/" class="md-nav__link">
        AnnotationTool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_api/text_encoder/" class="md-nav__link">
        TextEncoder
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        CLI
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="data">Data</h1>
<hr />
<h2 id="overview">Overview</h2>
<p>The first step in the <strong>nerblackbox</strong> workflow (after the mandatory <a href="../preparation/">Preparation</a>) is 
to choose a dataset. Datasets for NER can differ in many regards:</p>
<ul>
<li><a href="#dataset-sources">Dataset Source</a>: Many datasets are publicly available on HuggingFace or in GitHub repositories. You may also have private datasets on your local filesystem or an annotation tool server.</li>
<li><a href="#dataset-types">Dataset Type</a>: Some datasets are pretokenized while others come as plain text together with a list of entities and their spans. </li>
<li><a href="#dataset-formats">Dataset Format</a>: Even for two datasets of the same <a href="#dataset-types">Dataset Type</a>, the specific formatting of the data may differ.</li>
<li><a href="#dataset-splits">Dataset Splits</a>: Some datasets are divided into train/validation/test subsets, while others only have train/test subsets, or aren't split into subsets at all.</li>
<li><a href="#annotation-schemes">Annotation Scheme</a>: There exist different annotation schemes like IO, BIO, BILOU and variations thereof.</li>
</ul>
<p><strong>nerblackbox</strong> can handle all these different cases automatically. 
It provides a simple <a href="../python_api/dataset">Dataset</a> class which allows to easily set up any dataset and make it readily available for training and evaluation:</p>
<details class="note">
<summary>set up a dataset</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;&lt;dataset_name&gt;&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;&lt;source&gt;&quot;</span><span class="p">)</span>  <span class="c1"># &lt;source&gt; = HF, BI, LF</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_up</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<p>This creates dataset files in the folder <code>./store/datasets/&lt;dataset_name&gt;</code>.</p>
</details>
<p>The above procedure may---depending on the dataset---include downloading, reformatting, train/validation/test splitting and an analysis of the data.
In the following, we will describe the details of this procedure.</p>
<hr />
<h2 id="dataset-sources">Dataset Sources</h2>
<p>Datasets can be taken directly from <a href="#huggingface-hf">HuggingFace (HF)</a>, 
the pool of <a href="#built-in-bi">Built-in (BI)</a> datasets, or
the <a href="#local-filesystem-lf">Local Filesystem (LF)</a>.
Integration of data from <a href="#annotation-tool-at">Annotation Tool (AT)</a> servers is also possible.</p>
<h3 id="huggingface-hf">HuggingFace (HF)</h3>
<p>To employ a dataset from HuggingFace, specify <code>"HF"</code> as the source in addition to the name of the dataset:</p>
<details class="example">
<summary>set up a dataset from HuggingFace (HF)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;conll2003&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;HF&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_up</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>Dataset subsets, if existent, can also be chosen. 
For more details, we refer to the <a href="../python_api/dataset">Python API documentation</a>.</p>
<h3 id="built-in-bi">Built-in (BI)</h3>
<p>The following datasets are built-in:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Full Name</th>
<th>Language</th>
<th>Open Source</th>
<th>Annotation Scheme</th>
<th>Sample Type</th>
<th>#Samples (Train, Val, Test)</th>
<th>Required Files</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>swedish_ner_corpus</td>
<td>Swedish NER Corpus</td>
<td>Swedish</td>
<td>Yes</td>
<td>IO</td>
<td>Sentence</td>
<td>(4819, 2066, 2453)</td>
<td>---</td>
<td><a href="https://github.com/klintan/swedish-ner-corpus">Description+Data</a></td>
</tr>
<tr>
<td>sic</td>
<td>SIC</td>
<td>Swedish</td>
<td>Yes</td>
<td>BIO</td>
<td>Sentence</td>
<td>(436, 188, 268)</td>
<td>---</td>
<td><a href="https://www.ling.su.se/english/nlp/corpora-and-resources/sic">Description+Data</a></td>
</tr>
<tr>
<td>suc</td>
<td>SUC 3.0</td>
<td>Swedish</td>
<td>No</td>
<td>BIO</td>
<td>Sentence</td>
<td>(71046, 1546, 1568)</td>
<td><code>suc-*.conll</code></td>
<td><a href="https://www.ling.su.se/english/nlp/corpora-and-resources/suc">Description</a></td>
</tr>
<tr>
<td>swe_nerc</td>
<td>Swe-NERC</td>
<td>Swedish</td>
<td>Yes</td>
<td>BIO</td>
<td>Sentence</td>
<td>(6841, 878, 891)</td>
<td>---</td>
<td><a href="https://gubox.app.box.com/v/SLTC-2020-paper-17">Description</a>; <a href="https://spraakbanken.gu.se/lb/resurser/swe-nerc/">Data</a></td>
</tr>
</tbody>
</table>
<p>To employ a built-in dataset, specify <code>"BI"</code> as the source in addition to the name of the dataset:</p>
<details class="example">
<summary>set up a dataset that is Built-in (BI)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;swe_nerc&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;BI&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_up</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>Note that for datasets which are not open source, the <code>Required Files</code> need to be provided manually, see <a href="#local-filesystem-lf">Local Filesystem (LF)</a>.</p>
<h3 id="local-filesystem-lf">Local Filesystem (LF)</h3>
<p>Data from the Local Filesystem needs to be stored either as <code>.jsonl</code> or <code>.csv</code>, depending on the <a href="#dataset-types">Dataset Type</a>.
Make sure that the correct <a href="#dataset-formats">Dataset Format</a> is followed. 
You can either provide a single file or three separate files for the train/val/test <a href="#dataset-splits">Dataset Splits</a>.
A single file dataset will automatically be split as part of the setup (reformatting step).</p>
<p>The following name conventions need to be obeyed.</p>
<table>
<thead>
<tr>
<th>Dataset Type</th>
<th>Dataset Splits</th>
<th>File Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Standard</td>
<td>No</td>
<td><code>&lt;local_dataset&gt;.jsonl</code></td>
</tr>
<tr>
<td>Standard</td>
<td>Yes</td>
<td><code>train.jsonl</code>, <code>val.jsonl</code>, <code>test.jsonl</code></td>
</tr>
<tr>
<td>Pretokenized</td>
<td>No</td>
<td><code>&lt;local_dataset&gt;.csv</code></td>
</tr>
<tr>
<td>Pretokenized</td>
<td>Yes</td>
<td><code>train.csv</code>, <code>val.csv</code>, <code>test.csv</code></td>
</tr>
</tbody>
</table>
<p>To include a dataset from your local filesystem, do the following:</p>
<ul>
<li>
<p>Create a folder <code>./store/datasets/&lt;local_dataset&gt;</code></p>
</li>
<li>
<p>Add one or three <code>.jsonl</code> or <code>.csv</code> file(s) to the folder. </p>
</li>
</ul>
<p>To employ the local dataset, specify its name, <code>"LF"</code> as the source and whether it is pretokenized and/or split:</p>
<details class="example">
<summary>set up a dataset from Local Filesystem (LF)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_dataset&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;LF&quot;</span><span class="p">,</span> <span class="n">pretokenized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_up</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<!---
TODO
Own local datasets can also be created programmatically (like the :ref:`Built-in datasets <builtindatasets>`):
- (todo: revise the following)
- Create a new module ``./store/datasets/formatter/<local_dataset>_formatter.py``
- Derive the class ``<NewDataset>Formatter`` from ``BaseFormatter`` and implement the abstract base methods
- (todo: additional instructions needed here)
--->

<h3 id="annotation-tool-at">Annotation Tool (AT)</h3>
<p><strong>nerblackbox</strong> provides tools to seamlessly integrate two popular (open source) annotation tools,
<a href="https://labelstud.io/">LabelStudio</a> and <a href="https://doccano.github.io/doccano/">Doccano</a>.
Datasets can be downloaded from a server like this:</p>
<details class="note">
<summary>Download Data from Annotation Tool</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="highlight"><pre><span></span><code><span class="n">annotation_tool</span> <span class="o">=</span> <span class="n">AnnotationTool</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;&lt;dataset_name&gt;&quot;</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&lt;config_file_path&gt;&quot;</span><span class="p">)</span>
<span class="n">annotation_tool</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;&lt;project_name&gt;&quot;</span><span class="p">)</span>
</code></pre></div>
<code>&lt;project_name&gt;</code> has to correspond to a project name in the annotation tool. 
<code>&lt;dataset_name&gt;</code> is used within nerblackbox and may be chosen at discretion.</p>
</div>
</div>
</div>
</details>
<p>In order for the above to work, a config file (<code>*.ini</code>) with the annotation tool server's access information needs to be provided.
They differ slightly for LabelStudio and Doccano, as can be seen in the following examples:</p>
<details class="example">
<summary>LabelStudio Integration</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Config File</label><label for="__tabbed_6_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gh"># labelstudio.ini</span>
[main]
tool = labelstudio
url = http://localhost:8081
api_key = &lt;ADD_API_KEY_HERE&gt;
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">annotation_tool</span> <span class="o">=</span> <span class="n">AnnotationTool</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;my_dataset&quot;</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;labelstudio.ini&quot;</span><span class="p">)</span>
<span class="n">annotation_tool</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<details class="example">
<summary>Doccano Integration</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Config File</label><label for="__tabbed_7_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gh"># doccano.ini</span>
[main]
tool = doccano
url = http://localhost:8082
username = admin
password = password
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">annotation_tool</span> <span class="o">=</span> <span class="n">AnnotationTool</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;my_dataset&quot;</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;doccano.ini&quot;</span><span class="p">)</span>
<span class="n">annotation_tool</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>After the dataset is downloaded, it will consist of a single <code>.json</code> file of the standard <a href="#dataset-types">Dataset Type</a>.
It can be treated just like a dataset from the <a href="../../data/#local-filesystem-lf">Local Filesystem (LF)</a>. 
Note, however, that an additional argument <code>file_path</code> needs to be provided, as shown in the following example:</p>
<details class="example">
<summary>set up dataset from Annotation Tool (AT)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># download</span>
<span class="n">annotation_tool</span> <span class="o">=</span> <span class="n">AnnotationTool</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;my_dataset&quot;</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;labelstudio.ini&quot;</span><span class="p">)</span>
<span class="n">annotation_tool</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="n">annotation_tool</span><span class="o">.</span><span class="n">get_file_path</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>

<span class="c1"># set up</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_dataset&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;LF&quot;</span><span class="p">,</span> <span class="n">pretokenized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">)</span>  
<span class="n">dataset</span><span class="o">.</span><span class="n">set_up</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>For further details, we refer to the <a href="../python_api/annotation_tool">Python API documentation</a> and the
example <a href="https://github.com/flxst/nerblackbox/tree/master/notebooks">notebooks</a>.</p>
<hr />
<h2 id="dataset-types">Dataset Types</h2>
<p>Annotated data for named entity recognition in its purest form contains raw text together with a list of entities.
Each entity is defined by its position in the raw text and the corresponding tag. We call this the <strong>standard type</strong>.</p>
<p>After the data is read in, the model's tokenizer is used to pretokenize it.
At inference time, the model makes predictions on the pretokenized data.
Subsequently, these predictions are mapped back to the original text.</p>
<p><img alt="Standard &amp; Pretokenized" src="../images/standard_pretokenized.png" /></p>
<p>Often times, especially in the case of public datasets, the data already comes as pretokenized though. 
We call this the <strong>pretokenized type</strong>.
In the case of pretokenized data at inference time, the information to map the predictions back to the original text is missing.
Hence, the last step in the above chart is skipped.</p>
<p><strong>nerblackbox</strong> can process datasets in both the standard and pretokenized type. 
Both are assigned specific formats, which we will discuss next.</p>
<hr />
<h2 id="dataset-formats">Dataset Formats</h2>
<p><strong>nerblackbox</strong> uses a single, well-defined data format for each <a href="#dataset-types">Dataset Type</a>. 
Datasets which are downloaded from the internet (<code>source = HF, BI</code>) are automatically reformatted as part of the setup, if needed. </p>
<p>The <strong>standard format</strong>, which is commonly used by annotation tools, looks as follows:</p>
<details class="example">
<summary>Example: standard format (*.jsonl)</summary>
<div class="highlight"><pre><span></span><code>{
    &quot;text&quot;: &quot;President Barack Obama went to Harvard&quot;,
    &quot;tags&quot;: [
        {
            &quot;token&quot;: &quot;President Barack Obama&quot;,
            &quot;tag&quot;: &quot;PER&quot;,
            &quot;char_start&quot;: 0,
            &quot;char_end&quot;: 22
        },
        {
            &quot;token&quot;: &quot;Harvard&quot;,
            &quot;tag&quot;: &quot;ORG&quot;,
            &quot;char_start&quot;: 31,
            &quot;char_end&quot;: 38
        }
    ]
}
</code></pre></div>
</details>
<p>Note that the above represents a single training sample that constitutes a single line in the <code>jsonl</code> file. 
The indentations are shown for convenience only.</p>
<p>The <strong>pretokenized format</strong>, which is commonly used in public datasets, looks as follows:</p>
<details class="example">
<summary>Example: pretokenized format (*.csv)</summary>
<div class="highlight"><pre><span></span><code>PER PER PER O O ORG &lt;tab&gt; President Barack Obama went to Harvard
</code></pre></div>
</details>
<p>Note that each row has to contain a single training sample in the format
<code>&lt;tags&gt; &lt;tab&gt; &lt;text&gt;</code>, where in <code>&lt;tags&gt;</code> and <code>&lt;text&gt;</code> the tags and tokens are separated by whitespace.</p>
<hr />
<h2 id="dataset-splits">Dataset Splits</h2>
<p><strong>nerblackbox</strong> always requires a dataset to be split into train/validation/test subsets.
If the original dataset does not fulfill this condition, it is automatically split as part of the setup.</p>
<p>By default, a single file dataset is split into 80% training, 10% validation and 10% test subsets. 
If the original dataset already consists of train/test subsets, 11.1% of the train subset is used for validation 
(which, assuming that the test subset amounts to 10% of the whole data, leads to the same 80/10/10 split).</p>
<p>The relative sizes of the subsets can be specified as arguments of the <code>set_up()</code> method.</p>
<details class="example">
<summary>specify size of validation subset</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;swedish_ner_corpus&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;HF&quot;</span><span class="p">)</span>  <span class="c1"># contains train/test subsets</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">set_up</span><span class="p">(</span><span class="n">val_fraction</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>                           <span class="c1"># use 20% of the train subset for validation</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p>For more details, we refer to the <a href="../python_api/dataset">Python API documentation</a>.</p>
<hr />
<h2 id="annotation-schemes">Annotation Schemes</h2>
<p>NER datasets come with different annotation schemes. 
<strong>nerblackbox</strong> uses the 3 standardized schemes IO, BIO and BILOU:</p>
<p><img alt="Annotation Schemes" src="../images/annotation_schemes.png" /></p>
<p>For the BIO and BILOU schemes, there exist many variations (e.g. IOB1, IOB2 for BIO) and equivalent schemes (e.g. IOBES for BILOU).
<strong>nerblackbox</strong> automatically recognizes a dataset's annotation scheme (e.g. IOB1) and translates it to the corresponding standardized scheme (e.g. BIO) as part of the setup, if needed. 
Note that the standardized BIO scheme corresponds to the variation IOB2.</p>
<p><strong>nerblackbox</strong> allows to switch between the annotation schemes at <a href="../training">Training</a> time, via the <a href="../training/#parameters">Parameter</a> <code>annotation_scheme</code>.
Note, however, that the information content of the IO scheme is inferior compared to the BIO and BILOU schemes.</p>
<hr />
<h2 id="dataset-analysis">Dataset Analysis</h2>
<p>After a dataset is set up, some useful features and statistics (e.g. tags, tag distribution) can be found at <code>./store/datasets/&lt;dataset_name&gt;/analyze_data</code></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 - 2023 Felix Stollenwerk
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "toc.integrate"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b78d2936.min.js"></script>
      
    
  </body>
</html>